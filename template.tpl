___TERMS_OF_SERVICE___

By creating or modifying this file you agree to Google Tag Manager's Community
Template Gallery Developer Terms of Service available at
https://developers.google.com/tag-manager/gallery-tos (or such other URL as
Google may provide), as modified from time to time.


___INFO___

{
  "type": "TAG",
  "id": "cvt_temp_public_id",
  "version": 1,
  "securityGroups": [],
  "displayName": "indemandly",
  "categories": [
    "CHAT",
    "EMAIL_MARKETING",
    "LEAD_GENERATION",
    "MARKETING",
    "SALES"
  ],
  "brand": {
    "id": "brand_indemandly",
    "displayName": "indemandly",
    "thumbnail": "data:image/png;base64,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\u003d"
  },
  "description": "Install indemandly widget",
  "containerContexts": [
    "WEB"
  ]
}


___TEMPLATE_PARAMETERS___

[
  {
    "type": "TEXT",
    "name": "domain",
    "displayName": "domain (indemandly username)",
    "simpleValueType": true,
    "valueValidators": [
      {
        "type": "STRING_LENGTH",
        "args": [
          3,
          255
        ]
      },
      {
        "type": "NON_EMPTY"
      }
    ],
    "help": "Your unique indemandly username (username.indemand.ly)"
  }
]


___SANDBOXED_JS_FOR_WEB_TEMPLATE___

const injectScript = require('injectScript');
const callInWindow = require('callInWindow');
const logToConsole = require('logToConsole');

const scriptSrc = 'https://widget.indemand.ly/launcher.js';

const handleScriptFailed = function() {
  logToConsole('[-] Failed to load indemandly script');
  data.gtmOnFailure();
};

const handleScriptLoaded = function() {
  logToConsole('[+] Script loaded');
  const options = { domain: data.domain };
  logToConsole('[.] Initializing indemandly widget with options:', options);
  callInWindow('Indemandly.init', options);
  logToConsole('[+] Widget initialized');
  data.gtmOnSuccess();
};

if (typeof data.domain !== 'string') {
  logToConsole('[-] Domain not specified');
  data.gtmOnFailure();
} else {
  logToConsole('[.] Loading indemandly script');
  injectScript(scriptSrc, handleScriptLoaded, handleScriptFailed, '0');
}


___WEB_PERMISSIONS___

[
  {
    "instance": {
      "key": {
        "publicId": "access_globals",
        "versionId": "1"
      },
      "param": [
        {
          "key": "keys",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "Indemandly.init"
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "logging",
        "versionId": "1"
      },
      "param": [
        {
          "key": "environments",
          "value": {
            "type": 1,
            "string": "debug"
          }
        }
      ]
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "inject_script",
        "versionId": "1"
      },
      "param": [
        {
          "key": "urls",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "https://widget.indemand.ly/launcher.js"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  }
]


___TESTS___

scenarios:
- name: Check empty domain field
  code: |-
    runCode({});
    assertApi('gtmOnFailure').wasCalled();
setup: ''


___NOTES___

Created on 08.12.2021, 15:27:04


